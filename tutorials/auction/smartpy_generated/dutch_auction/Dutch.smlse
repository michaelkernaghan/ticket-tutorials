(storage (record 85 (current_price (literal (intOrNat 0) 85)) (in_progress (literal (bool False) 88)) (owner (literal (address "tz1KqTpEZ7Yob7QbPE4Hy4Wo8fHG8LhKxZSx") -1)) (reserve_price (literal (intOrNat 0) 85)) (round_time (literal (intOrNat 0) 85)) (start_time (literal (timestamp 0) 89)) (ticket (variant "None" (unit) -1)))
storage_type ((record ((current_price "nat") (in_progress "bool") (owner "address") (reserve_price "nat") (round_time "int") (start_time "timestamp") (ticket (option (ticket "nat")))) None))
messages ((buy True ((set_type (params 138) "address" 139) (verify (attr (data) "in_progress" 140) False 140) (verify (invert (eq (sender) (attr (data) "owner" 141) 141) 141) False 141) (verify (eq (amount) (split_tokens (literal (mutez 1) 142) (attr (data) "current_price" 142) (literal (intOrNat 1) 142) 142) 142) False 142) (verify (lt (now) (add_seconds (attr (data) "start_time" 144) (attr (data) "round_time" 144) 144) 144) False 144) (set (operations 146) (cons (transfer (unit) (amount) (openVariant (contract "" "unit" (attr (data) "owner" 141) 146) "Some" "None" 146) 146) (operations 146) 146) 146) (set (operations 150) (cons (transfer (openVariant (attr (data) "ticket" 150) "Some" "None" 150) (literal (mutez 0) 150) (openVariant (contract "receiveNft" (ticket "nat") (params 138) 149) "Some" "None" 149) 150) (operations 150) 150) 150) (set (attr (data) "ticket" 150) (variant "None" (unit) -1) 153) (set (attr (data) "in_progress" 140) (literal (bool False) 154) 154))) (cancelAuction True ((verify (attr (data) "in_progress" 140) False (literal (string "No Auction in progress") 158) 158) (verify (eq (sender) (attr (data) "owner" 141) 159) False (literal (string "User not Authorized") 159) 159) (set (attr (data) "current_price" 142) (literal (intOrNat 0) 160) 160) (set (operations 164) (cons (transfer (openVariant (attr (data) "ticket" 150) "Some" "None" 150) (literal (mutez 0) 164) (openVariant (contract "receiveNft" (ticket "nat") (attr (data) "owner" 141) 163) "Some" "None" 163) 164) (operations 164) 164) 164) (set (attr (data) "ticket" 150) (variant "None" (unit) -1) 166) (set (attr (data) "in_progress" 140) (literal (bool False) 167) 167))) (configureAuction True ((set_type (params 101) (record ((opening_price "nat") (reserve_price "nat") (round_time "int") (start_time "timestamp") (ticket (ticket "nat"))) None) 102) (verify (eq (source) (attr (data) "owner" 141) 103) False (literal (string "User Not Authorized") 103) 103) (verify (invert (attr (data) "in_progress" 140) 104) False (literal (string "Auction in progress") 104) 104) (set (attr (data) "current_price" 142) (attr (params 101) "opening_price" 106) 106) (set (attr (data) "reserve_price" 107) (attr (params 101) "reserve_price" 107) 107) (set (attr (data) "start_time" 144) (attr (params 101) "start_time" 108) 108) (set (attr (data) "round_time" 144) (attr (params 101) "round_time" 109) 109) (set (attr (data) "ticket" 150) (variant "Some" (attr (params 101) "ticket" 110) 110) 110))) (dropPrice True ((set_type (params 125) "nat" 126) (verify (eq (sender) (attr (data) "owner" 141) 127) False (literal (string "User not Authorized") 127) 127) (verify (attr (data) "in_progress" 140) False (literal (string "No Auction in progress") 128) 128) (verify (lt (params 125) (attr (data) "current_price" 142) 129) False (literal (string "Price not dropped") 129) 129) (verify (ge (params 125) (attr (data) "reserve_price" 107) 130) False (literal (string "Price below reserve_price") 130) 130) (verify (gt (now) (add_seconds (attr (data) "start_time" 144) (attr (data) "round_time" 144) 132) 132) False (literal (string "Previous round has not ended") 132) 132) (set (attr (data) "current_price" 142) (params 125) 134) (set (attr (data) "start_time" 144) (now) 135))) (startAuction True ((verify (eq (sender) (attr (data) "owner" 141) 114) False (literal (string "User not Authorized") 114) 114) (verify (invert (attr (data) "in_progress" 140) 115) False (literal (string "Auction in progress") 115) 115) (verify (isVariant (attr (data) "ticket" 150) "Some" 117) False (literal (string "No ticket to auction") 117) 117) (verify (ge (now) (attr (data) "start_time" 144) 119) False (literal (string "Too early to start auction") 119) 119) (set (attr (data) "in_progress" 140) (literal (bool True) 121) 121) (set (attr (data) "start_time" 144) (now) 122))))
flags (edo)
globals ()
views ()
entry_points_layout ()
initial_metadata ()
balance ())